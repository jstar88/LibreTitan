var animatedcollapse={divholders:{},divgroups:{},lastactiveingroup:{},preloadimages:[],show:function(b){if(typeof b=="object"){for(var a=0;a<b.length;a++){this.showhide(b[a],"show")}}else{this.showhide(b,"show")}},hide:function(b){if(typeof b=="object"){for(var a=0;a<b.length;a++){this.showhide(b[a],"hide")}}else{this.showhide(b,"hide")}},toggle:function(a){if(typeof a=="object"){a=a[0]}this.showhide(a,"toggle")},addDiv:function(b,a){this.divholders[b]=({id:b,$divref:null,attrs:a});this.divholders[b].getAttr=function(d){var c=new RegExp(d+"=([^,]+)","i");return(c.test(this.attrs)&&parseInt(RegExp.$1)!=0)?RegExp.$1:null};this.currentid=b;return this},showhide:function(d,c){var a=this.divholders[d].$divref;if(this.divholders[d]&&a.length==1){var b=this.divgroups[a.attr("groupname")];if(a.attr("groupname")&&b.count>1&&(c=="show"||c=="toggle"&&a.css("display")=="none")){if(b.lastactivedivid&&b.lastactivedivid!=d){this.slideengine(b.lastactivedivid,"hide")}this.slideengine(d,"show");b.lastactivedivid=d}else{this.slideengine(d,c)}}},slideengine:function(e,d){var a=this.divholders[e].$divref;var b=this.divholders[e].$togglerimage;if(this.divholders[e]&&a.length==1){var c={height:d};if(a.attr("fade")){c.opacity=d}a.animate(c,a.attr("speed")?parseInt(a.attr("speed")):500,function(){if(b){b.attr("src",(a.css("display")=="none")?b.data("srcs").closed:b.data("srcs").open)}if(animatedcollapse.ontoggle){try{animatedcollapse.ontoggle(jQuery,a.get(0),a.css("display"))}catch(f){alert('An error exists inside your "ontoggle" function:\n\n'+f+"\n\nAborting execution of function.")}}});return false}},generatemap:function(){var b={};for(var a=0;a<arguments.length;a++){if(arguments[a][1]!=null){b[arguments[a][0]]=arguments[a][1]}}return b},init:function(){var a=this;jQuery(document).ready(function(e){animatedcollapse.ontoggle=animatedcollapse.ontoggle||null;var f=animatedcollapse.urlparamselect();var b=a.getCookie("acopendivids");var d=a.getCookie("acgroupswithpersist");if(b!=null){b=(b=="nada")?[]:b.split(",")}d=(d==null||d=="nada")?[]:d.split(",");jQuery.each(a.divholders,function(){this.$divref=e("#"+this.id);if((this.getAttr("persist")||jQuery.inArray(this.getAttr("group"),d)!=-1)&&b!=null){var h=(jQuery.inArray(this.id,b)!=-1)?"block":"none"}else{var h=this.getAttr("hide")?"none":null}if(f[0]=="all"||jQuery.inArray(this.id,f)!=-1){h="block"}else{if(f[0]=="none"){h="none"}}this.$divref.css(a.generatemap(["height",this.getAttr("height")],["display",h]));this.$divref.attr(a.generatemap(["groupname",this.getAttr("group")],["fade",this.getAttr("fade")],["speed",this.getAttr("speed")]));if(this.getAttr("group")){var g=a.divgroups[this.getAttr("group")]||(a.divgroups[this.getAttr("group")]={});g.count=(g.count||0)+1;if(jQuery.inArray(this.id,f)!=-1){g.lastactivedivid=this.id;g.overridepersist=1}if(!g.lastactivedivid&&this.$divref.css("display")!="none"||h=="block"&&typeof g.overridepersist=="undefined"){g.lastactivedivid=this.id}this.$divref.css({display:"none"})}});jQuery.each(a.divgroups,function(){if(this.lastactivedivid&&f[0]!="none"){a.divholders[this.lastactivedivid].$divref.show()}});if(animatedcollapse.ontoggle){jQuery.each(a.divholders,function(){animatedcollapse.ontoggle(jQuery,this.$divref.get(0),this.$divref.css("display"))})}var c=e("a[rel]").filter('[rel^="collapse["], [rel^="expand["], [rel^="toggle["]');c.each(function(){this._divids=this.getAttribute("rel").replace(/(^\w+)|(\s+)/g,"").replace(/[\[\]']/g,"");if(this.getElementsByTagName("img").length==1&&a.divholders[this._divids]){animatedcollapse.preloadimage(this.getAttribute("data-openimage"),this.getAttribute("data-closedimage"));$togglerimage=e(this).find("img").eq(0).data("srcs",{open:this.getAttribute("data-openimage"),closed:this.getAttribute("data-closedimage")});a.divholders[this._divids].$togglerimage=e(this).find("img").eq(0);a.divholders[this._divids].$togglerimage.attr("src",(a.divholders[this._divids].$divref.css("display")=="none")?$togglerimage.data("srcs").closed:$togglerimage.data("srcs").open)}e(this).click(function(){var g=this.getAttribute("rel");var h=(this._divids=="")?[]:this._divids.split(",");if(h.length>0){animatedcollapse[/expand/i.test(g)?"show":/collapse/i.test(g)?"hide":"toggle"](h);return false}})});e(window).bind("unload",function(){a.uninit()})})},uninit:function(){var b="",a="";jQuery.each(this.divholders,function(){if(this.$divref.css("display")!="none"){b+=this.id+","}if(this.getAttr("group")&&this.getAttr("persist")){a+=this.getAttr("group")+","}});b=(b=="")?"nada":b.replace(/,$/,"");a=(a=="")?"nada":a.replace(/,$/,"");this.setCookie("acopendivids",b);this.setCookie("acgroupswithpersist",a)},getCookie:function(a){var b=new RegExp(a+"=[^;]*","i");if(document.cookie.match(b)){return document.cookie.match(b)[0].split("=")[1]}return null},setCookie:function(b,c,d){if(typeof d!="undefined"){var a=new Date();a.setDate(a.getDate()+d);document.cookie=b+"="+c+"; path=/; expires="+a.toGMTString()}else{document.cookie=b+"="+c+"; path=/"}},urlparamselect:function(){window.location.search.match(/expanddiv=([\w\-_,]+)/i);return(RegExp.$1!="")?RegExp.$1.split(","):[]},preloadimage:function(){var a=this.preloadimages;for(var b=0;b<arguments.length;b++){if(arguments[b]&&arguments[b].length>0){a[a.length]=new Image();a[a.length-1].src=arguments[b]}}}};